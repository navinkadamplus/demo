{"ast":null,"code":"import _classCallCheck from \"/home/navin/Documents/officeWork/fabric_pract/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/navin/Documents/officeWork/fabric_pract/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/navin/Documents/officeWork/fabric_pract/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/navin/Documents/officeWork/fabric_pract/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/navin/Documents/officeWork/fabric_pract/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/navin/Documents/officeWork/fabric_pract/src/Component/DragDrop/DragDrop.jsx\";\nimport './DragDrop.css';\nimport { fabric } from 'fabric';\nimport React, { Component } from 'react';\nimport Images from '../Image/Images';\nimport FontFamily from '../FontFamily/FontsFamily';\nimport Input from '../Input/Input';\nimport TextAlign from '../TextAlign/TextAlign';\n\nvar DragDrop =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DragDrop, _Component);\n\n  function DragDrop(props) {\n    var _this;\n\n    _classCallCheck(this, DragDrop);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DragDrop).call(this, props));\n    _this.state = {\n      selectedImg: '',\n      selectedColor: '#000000',\n      selectedBackGroundColor: '#77a05f',\n      selectedFontFamily: 'Helvetica Neue',\n      fontSize: 30,\n      copyPasteVisibility: false,\n      textVisibility: false,\n      selectedTextAlign: '',\n      fontFamilys: ['arial', 'optima', 'hoefler text', 'plaster', 'engagement', 'VT323', 'Helvetica Neue', 'myriad pro', 'comic sans ms', 'delicious', 'verdana', 'georgia', 'courier', 'impact', 'monaco'],\n      textAligns: ['left', 'right', 'center', 'justify'],\n      imgSrc: ['1.jpg', '2.jpg', '3.jpg', '4.jpg', '5.png', '6.jpg', '7.jpg', '8.jpg', '9.jpg', '10.png', '11.jpg', '12.jpg', '13.jpg', '14.jpg'],\n      cloneObject: ''\n    };\n\n    _this.onDragStart = function (event) {\n      _this.setState({\n        selectedImg: event.target\n      });\n    };\n\n    _this.drawImage = function () {\n      fabric.Image.fromURL(_this.state.selectedImg.src, function (img) {\n        img.set({\n          left: 0,\n          top: 0,\n          border: '#000',\n          stroke: '#F0F0F0',\n          strokeWidth: 5\n        }).scale(0.2);\n\n        _this.canvas.add(img).renderAll();\n      }, {\n        cornerStyle: 'circle',\n        borderColor: '#53c5bf',\n        cornerColor: '#acdab5b8',\n        cornerSize: 10\n      });\n\n      _this.customsControl();\n    };\n\n    _this.drawText = function () {\n      var text = new fabric.Textbox('type text', {\n        left: 50,\n        top: 20,\n        width: 200,\n        height: 200,\n        fontFamily: 'helvetica neue',\n        fill: _this.state.selectedColor,\n        stroke: '#fff',\n        fontSize: 30,\n        strokeWidth: 0.1\n      });\n\n      _this.canvas.add(text);\n\n      _this.customsControl();\n    };\n\n    _this.onDownloadImage = function (e) {\n      var a = document.createElement('a');\n      a.href = _this.canvas.toDataURL({\n        format: 'png',\n        quality: 0.8\n      });\n      a.download = 'custom.png';\n      a.click();\n      console.log(_this.canvas);\n    };\n\n    _this.onChangeFontFamily = function (e) {\n      if (_this.canvas.getActiveObject()) {\n        _this.setState({\n          selectedFontFamily: e.target.value\n        }, function () {\n          this.canvas.getActiveObject().set('fontFamily', this.state.selectedFontFamily);\n          this.canvas.renderAll();\n        });\n      } else {\n        return alert('select Text');\n      }\n    };\n\n    _this.onChangeTextAlign = function (e) {\n      if (_this.canvas.getActiveObject()) {\n        _this.setState({\n          selectedTextAlign: e.target.value\n        }, function () {\n          this.canvas.getActiveObject().set('textAlign', this.state.selectedTextAlign);\n          this.canvas.renderAll();\n        });\n      } else {\n        return alert('select Text');\n      }\n    };\n\n    _this.onRemoveElement = function (key) {\n      _this.canvas.remove(_this.canvas.getActiveObject());\n    };\n\n    _this.onChangeColor = function (e) {\n      if (_this.canvas.getActiveObject()) {\n        _this.setState({\n          selectedColor: e.target.value\n        }, function () {\n          _this.canvas.getActiveObject().set('fill', _this.state.selectedColor);\n\n          _this.canvas.renderAll();\n        });\n      } else {\n        return alert('select Text');\n      }\n    };\n\n    _this.onChangeBackGroundColor = function (e) {\n      _this.setState({\n        selectedBackGroundColor: e.target.value\n      }, function () {\n        _this.canvas.setBackgroundColor(_this.state.selectedBackGroundColor, function () {\n          _this.canvas.renderAll();\n        });\n      });\n    };\n\n    _this.onChangeFontSize = function (e) {\n      if (/^\\d*$/.test(e.target.value)) {\n        if (_this.canvas.getActiveObject()) {\n          _this.setState({\n            fontSize: e.target.value\n          }, function () {\n            _this.canvas.getActiveObject().set('fontSize', _this.state.fontSize);\n\n            _this.canvas.renderAll();\n          });\n        } else {\n          return alert('select Text');\n        }\n      }\n    };\n\n    _this.onGroup = function (e) {\n      if (!_this.canvas.getActiveObject() || _this.canvas.getActiveObject().type !== 'activeSelection') {\n        return '';\n      }\n\n      _this.canvas.getActiveObject().toGroup();\n\n      _this.canvas.renderAll();\n    };\n\n    _this.onUnGroup = function (e) {\n      if (!_this.canvas.getActiveObject()) {\n        return;\n      }\n\n      if (_this.canvas.getActiveObject().type !== 'group') {\n        return;\n      }\n\n      _this.canvas.getActiveObject().toActiveSelection();\n\n      _this.canvas.renderAll();\n    };\n\n    _this.onMultipleSelection = function (e) {\n      _this.canvas.discardActiveObject();\n\n      var sel = new fabric.ActiveSelection(_this.canvas.getObjects(), {\n        canvas: _this.canvas\n      });\n\n      _this.canvas.setActiveObject(sel);\n\n      _this.canvas.renderAll();\n    };\n\n    _this.onCopy = function (e) {\n      if (_this.canvas.getActiveObject() === undefined) {\n        return '';\n      }\n\n      _this.canvas.getActiveObject().clone(function (cloned) {\n        _this.setState({\n          cloneObject: cloned\n        });\n      });\n    };\n\n    _this.onPaste = function (e) {\n      var _cloneObject = _this.state.cloneObject;\n\n      if (_cloneObject === '' || _cloneObject === null || _cloneObject === undefined) {\n        return '';\n      }\n\n      _cloneObject.clone(function (clonedObj) {\n        _this.canvas.discardActiveObject();\n\n        clonedObj.set({\n          left: clonedObj.left + 10,\n          top: clonedObj.top + 10,\n          evented: true\n        });\n\n        if (clonedObj.type === 'activeSelection') {\n          clonedObj.canvas = _this.canvas;\n          clonedObj.forEachObject(function (obj) {\n            this.canvas.add(obj);\n          });\n          clonedObj.setCoords();\n          alert('activeSelection');\n        } else {\n          _this.canvas.add(clonedObj);\n        }\n\n        _cloneObject.top += 10;\n        _cloneObject.left += 10;\n\n        _this.canvas.setActiveObject(clonedObj);\n\n        _this.canvas.requestRenderAll();\n      });\n\n      _this.customsControl();\n    };\n\n    _this.customsControl = function (e) {\n      _this.canvas.forEachObject(function (o) {\n        o.set({\n          borderColor: '#53c5bf',\n          cornerColor: '#acdab5b8',\n          cornerSize: 10,\n          cornerStyle: 'circle',\n          transparentCorners: true\n        });\n      });\n    };\n\n    _this.selectedObjectBackward = function (e) {\n      if (!_this.canvas.getActiveObject()) return '';\n\n      _this.canvas.sendToBack(_this.canvas.getActiveObject());\n\n      _this.canvas.renderAll();\n    };\n\n    _this.selectedObjectForward = function (e) {\n      if (!_this.canvas.getActiveObject()) return '';\n\n      _this.canvas.bringForward(_this.canvas.getActiveObject());\n\n      _this.canvas.renderAll();\n    };\n\n    _this.canvasRef = React.createRef();\n    _this.canvas = '';\n    return _this;\n  }\n\n  _createClass(DragDrop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.canvas = new fabric.Canvas(this.canvasRef.current, {\n        preserveObjectStacking: true\n      });\n      this.canvas.on('drop', this.drawImage);\n      this.canvas.on('object:selected', function (e) {\n        _this2.setState({\n          copyPasteVisibility: true\n        });\n      }); // visibility show Text Entered\n\n      this.canvas.on('text:editing:entered', function (e) {\n        _this2.setState({\n          textVisibility: true\n        });\n      }); // visibility hidden Text Entered\n\n      this.canvas.on('text:editing:exited', function (e) {\n        _this2.setState({\n          textVisibility: false\n        });\n      });\n      document.addEventListener('keydown', function (key) {\n        if (_this2.canvas.getActiveObject()) {\n          if (key.shiftKey && key.keyCode === 68) // 46 delete 68 D key.keyCode === 46 ||\n            //selected Object Delete\n            _this2.onRemoveElement();\n          if ((key.ctrlKey || key.keyCode === 17) && key.keyCode === 86) // 17 ctrl 86 V\n            //selected Object Paste\n            _this2.onPaste();\n          if ((key.ctrlKey || key.keyCode === 17) && key.keyCode === 67) // 17 ctrl 86 C\n            //selected Object Copy\n            _this2.onCopy();\n        }\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.canvas.off('drop');\n      document.removeEventListener('keypress');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, this.state.imgSrc.map(function (src, ind) {\n        return React.createElement(Images, {\n          src: src,\n          key: ind,\n          onDragStart: _this3.onDragStart,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329\n          },\n          __self: this\n        });\n      })), React.createElement(\"div\", {\n        className: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-evenly',\n          padding: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(Input, {\n        id: \"backGroundColor\",\n        type: \"color\",\n        value: this.state.selectedBackGroundColor,\n        onChange: this.onChangeBackGroundColor,\n        displayText: \"Background Color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.drawText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, \"Add Text\")), React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.selectedObjectBackward,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, \"Backward\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.selectedObjectForward,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, \"forward\"))), React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.onGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, \"Group\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.onUnGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }, \"UnGroup\"))), React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.onMultipleSelection,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, \"Multiple Selection\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: function onClick(e) {\n          return _this3.canvas.discardActiveObject() && _this3.canvas.requestRenderAll();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \"Deselect\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.onDownloadImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, \"download Image\")), React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        className: !this.state.copyPasteVisibility ? 'visibility' : '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.onCopy,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, \"Copy\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.onPaste,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }, \"Paste\")))), React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-evenly',\n          padding: '20px'\n        },\n        className: !this.state.textVisibility ? 'visibility' : '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }, React.createElement(FontFamily, {\n        selectedFontFamily: this.state.selectedFontFamily,\n        fonts: this.state.fontFamilys,\n        onChangeFontFamily: this.onChangeFontFamily,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }), React.createElement(TextAlign, {\n        selectedTextAlign: this.state.selectedTextAlign,\n        onChangeTextAlign: this.onChangeTextAlign,\n        aligns: this.state.textAligns,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422\n        },\n        __self: this\n      }), React.createElement(Input, {\n        id: \"fontColor\",\n        type: \"color\",\n        value: this.state.selectedColor,\n        onChange: this.onChangeColor,\n        displayText: \"Font Color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }), React.createElement(Input, {\n        id: \"fontSize\",\n        type: \"text\",\n        value: this.state.fontSize,\n        onChange: this.onChangeFontSize,\n        displayText: \"Font Size\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435\n        },\n        __self: this\n      }))), React.createElement(\"canvas\", {\n        ref: this.canvasRef,\n        height: \"500%\",\n        width: \"700%\",\n        className: \"canvas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return DragDrop;\n}(Component); //Crop images\n\n\nexport { DragDrop as default };","map":{"version":3,"sources":["/home/navin/Documents/officeWork/fabric_pract/src/Component/DragDrop/DragDrop.jsx"],"names":["fabric","React","Component","Images","FontFamily","Input","TextAlign","DragDrop","props","state","selectedImg","selectedColor","selectedBackGroundColor","selectedFontFamily","fontSize","copyPasteVisibility","textVisibility","selectedTextAlign","fontFamilys","textAligns","imgSrc","cloneObject","onDragStart","event","setState","target","drawImage","Image","fromURL","src","img","set","left","top","border","stroke","strokeWidth","scale","canvas","add","renderAll","cornerStyle","borderColor","cornerColor","cornerSize","customsControl","drawText","text","Textbox","width","height","fontFamily","fill","onDownloadImage","e","a","document","createElement","href","toDataURL","format","quality","download","click","console","log","onChangeFontFamily","getActiveObject","value","alert","onChangeTextAlign","onRemoveElement","key","remove","onChangeColor","onChangeBackGroundColor","setBackgroundColor","onChangeFontSize","test","onGroup","type","toGroup","onUnGroup","toActiveSelection","onMultipleSelection","discardActiveObject","sel","ActiveSelection","getObjects","setActiveObject","onCopy","undefined","clone","cloned","onPaste","_cloneObject","clonedObj","evented","forEachObject","obj","setCoords","requestRenderAll","o","transparentCorners","selectedObjectBackward","sendToBack","selectedObjectForward","bringForward","canvasRef","createRef","Canvas","current","preserveObjectStacking","on","addEventListener","shiftKey","keyCode","ctrlKey","off","removeEventListener","map","ind","display","justifyContent","padding"],"mappings":"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","sourcesContent":["import './DragDrop.css';\nimport { fabric } from 'fabric';\n\nimport React, { Component } from 'react';\n\nimport Images from '../Image/Images';\nimport FontFamily from '../FontFamily/FontsFamily';\nimport Input from '../Input/Input';\nimport TextAlign from '../TextAlign/TextAlign';\n\nexport default class DragDrop extends Component {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n    this.canvas = '';\n  }\n\n  state = {\n    selectedImg: '',\n    selectedColor: '#000000',\n    selectedBackGroundColor: '#77a05f',\n    selectedFontFamily: 'Helvetica Neue',\n    fontSize: 30,\n    copyPasteVisibility: false,\n    textVisibility: false,\n    selectedTextAlign: '',\n    fontFamilys: [\n      'arial',\n      'optima',\n      'hoefler text',\n      'plaster',\n      'engagement',\n      'VT323',\n      'Helvetica Neue',\n      'myriad pro',\n      'comic sans ms',\n      'delicious',\n      'verdana',\n      'georgia',\n      'courier',\n      'impact',\n      'monaco'\n    ],\n    textAligns: ['left', 'right', 'center', 'justify'],\n    imgSrc: [\n      '1.jpg',\n      '2.jpg',\n      '3.jpg',\n      '4.jpg',\n      '5.png',\n      '6.jpg',\n      '7.jpg',\n      '8.jpg',\n      '9.jpg',\n      '10.png',\n      '11.jpg',\n      '12.jpg',\n      '13.jpg',\n      '14.jpg'\n    ],\n    cloneObject: ''\n  };\n\n  onDragStart = event => {\n    this.setState({ selectedImg: event.target });\n  };\n\n  drawImage = () => {\n    fabric.Image.fromURL(\n      this.state.selectedImg.src,\n      img => {\n        img\n          .set({\n            left: 0,\n            top: 0,\n            border: '#000',\n            stroke: '#F0F0F0',\n            strokeWidth: 5\n          })\n          .scale(0.2);\n        this.canvas.add(img).renderAll();\n      },\n      {\n        cornerStyle: 'circle',\n        borderColor: '#53c5bf',\n        cornerColor: '#acdab5b8',\n        cornerSize: 10\n      }\n    );\n    this.customsControl();\n  };\n\n  drawText = () => {\n    let text = new fabric.Textbox('type text', {\n      left: 50,\n      top: 20,\n      width: 200,\n      height: 200,\n      fontFamily: 'helvetica neue',\n      fill: this.state.selectedColor,\n      stroke: '#fff',\n      fontSize: 30,\n      strokeWidth: 0.1\n    });\n    this.canvas.add(text);\n\n    this.customsControl();\n  };\n\n  onDownloadImage = e => {\n    let a = document.createElement('a');\n    a.href = this.canvas.toDataURL({\n      format: 'png',\n      quality: 0.8\n    });\n    a.download = 'custom.png';\n    a.click();\n    console.log(this.canvas);\n  };\n\n  onChangeFontFamily = e => {\n    if (this.canvas.getActiveObject()) {\n      this.setState({ selectedFontFamily: e.target.value }, function() {\n        this.canvas\n          .getActiveObject()\n          .set('fontFamily', this.state.selectedFontFamily);\n        this.canvas.renderAll();\n      });\n    } else {\n      return alert('select Text');\n    }\n  };\n\n  onChangeTextAlign = e => {\n    if (this.canvas.getActiveObject()) {\n      this.setState({ selectedTextAlign: e.target.value }, function() {\n        this.canvas\n          .getActiveObject()\n          .set('textAlign', this.state.selectedTextAlign);\n        this.canvas.renderAll();\n      });\n    } else {\n      return alert('select Text');\n    }\n  };\n\n  onRemoveElement = key => {\n    this.canvas.remove(this.canvas.getActiveObject());\n  };\n\n  onChangeColor = e => {\n    if (this.canvas.getActiveObject()) {\n      this.setState({ selectedColor: e.target.value }, () => {\n        this.canvas.getActiveObject().set('fill', this.state.selectedColor);\n        this.canvas.renderAll();\n      });\n    } else {\n      return alert('select Text');\n    }\n  };\n\n  onChangeBackGroundColor = e => {\n    this.setState({ selectedBackGroundColor: e.target.value }, () => {\n      this.canvas.setBackgroundColor(this.state.selectedBackGroundColor, () => {\n        this.canvas.renderAll();\n      });\n    });\n  };\n\n  onChangeFontSize = e => {\n    if (/^\\d*$/.test(e.target.value)) {\n      if (this.canvas.getActiveObject()) {\n        this.setState({ fontSize: e.target.value }, () => {\n          this.canvas.getActiveObject().set('fontSize', this.state.fontSize);\n          this.canvas.renderAll();\n        });\n      } else {\n        return alert('select Text');\n      }\n    }\n  };\n\n  onGroup = e => {\n    if (\n      !this.canvas.getActiveObject() ||\n      this.canvas.getActiveObject().type !== 'activeSelection'\n    ) {\n      return '';\n    }\n    this.canvas.getActiveObject().toGroup();\n    this.canvas.renderAll();\n  };\n\n  onUnGroup = e => {\n    if (!this.canvas.getActiveObject()) {\n      return;\n    }\n    if (this.canvas.getActiveObject().type !== 'group') {\n      return;\n    }\n    this.canvas.getActiveObject().toActiveSelection();\n    this.canvas.renderAll();\n  };\n\n  onMultipleSelection = e => {\n    this.canvas.discardActiveObject();\n    var sel = new fabric.ActiveSelection(this.canvas.getObjects(), {\n      canvas: this.canvas\n    });\n    this.canvas.setActiveObject(sel);\n    this.canvas.renderAll();\n  };\n\n  onCopy = e => {\n    if (this.canvas.getActiveObject() === undefined) {\n      return '';\n    }\n    this.canvas.getActiveObject().clone(cloned => {\n      this.setState({ cloneObject: cloned });\n    });\n  };\n\n  onPaste = e => {\n    let _cloneObject = this.state.cloneObject;\n    if (\n      _cloneObject === '' ||\n      _cloneObject === null ||\n      _cloneObject === undefined\n    ) {\n      return '';\n    }\n    _cloneObject.clone(clonedObj => {\n      this.canvas.discardActiveObject();\n      clonedObj.set({\n        left: clonedObj.left + 10,\n        top: clonedObj.top + 10,\n        evented: true\n      });\n      if (clonedObj.type === 'activeSelection') {\n        clonedObj.canvas = this.canvas;\n        clonedObj.forEachObject(function(obj) {\n          this.canvas.add(obj);\n        });\n        clonedObj.setCoords();\n        alert('activeSelection');\n      } else {\n        this.canvas.add(clonedObj);\n      }\n      _cloneObject.top += 10;\n      _cloneObject.left += 10;\n      this.canvas.setActiveObject(clonedObj);\n      this.canvas.requestRenderAll();\n    });\n    this.customsControl();\n  };\n\n  customsControl = e => {\n    this.canvas.forEachObject(function(o) {\n      o.set({\n        borderColor: '#53c5bf',\n        cornerColor: '#acdab5b8',\n        cornerSize: 10,\n        cornerStyle: 'circle',\n        transparentCorners: true\n      });\n    });\n  };\n\n  selectedObjectBackward = e => {\n    if (!this.canvas.getActiveObject()) return '';\n    this.canvas.sendToBack(this.canvas.getActiveObject());\n    this.canvas.renderAll();\n  };\n\n  selectedObjectForward = e => {\n    if (!this.canvas.getActiveObject()) return '';\n    this.canvas.bringForward(this.canvas.getActiveObject());\n    this.canvas.renderAll();\n  };\n\n  componentDidMount() {\n    this.canvas = new fabric.Canvas(this.canvasRef.current, {\n      preserveObjectStacking: true\n    });\n\n    this.canvas.on('drop', this.drawImage);\n\n    this.canvas.on('object:selected', e => {\n      this.setState({ copyPasteVisibility: true });\n    });\n\n    // visibility show Text Entered\n    this.canvas.on('text:editing:entered', e => {\n      this.setState({ textVisibility: true });\n    });\n    // visibility hidden Text Entered\n    this.canvas.on('text:editing:exited', e => {\n      this.setState({ textVisibility: false });\n    });\n\n    document.addEventListener('keydown', key => {\n      if (this.canvas.getActiveObject()) {\n        if (key.shiftKey && key.keyCode === 68)\n          // 46 delete 68 D key.keyCode === 46 ||\n          //selected Object Delete\n          this.onRemoveElement();\n        if ((key.ctrlKey || key.keyCode === 17) && key.keyCode === 86)\n          // 17 ctrl 86 V\n          //selected Object Paste\n          this.onPaste();\n        if ((key.ctrlKey || key.keyCode === 17) && key.keyCode === 67)\n          // 17 ctrl 86 C\n          //selected Object Copy\n          this.onCopy();\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.canvas.off('drop');\n    document.removeEventListener('keypress');\n  }\n  render() {\n    return (\n      <div>\n        <div className=\"container\">\n          <div className=\"left\">\n            {this.state.imgSrc.map((src, ind) => (\n              <Images src={src} key={ind} onDragStart={this.onDragStart} />\n            ))}\n          </div>\n\n          <div className=\"right\">\n            <div>\n              <div>\n                <div\n                  style={{\n                    display: 'flex',\n                    justifyContent: 'space-evenly',\n                    padding: '20px'\n                  }}>\n                  <Input\n                    id=\"backGroundColor\"\n                    type=\"color\"\n                    value={this.state.selectedBackGroundColor}\n                    onChange={this.onChangeBackGroundColor}\n                    displayText=\"Background Color\"\n                  />\n                  <div>\n                    <button onClick={this.drawText}>Add Text</button>\n                  </div>\n                  <div style={{ display: 'flex' }}>\n                    <div>\n                      <button onClick={this.selectedObjectBackward}>\n                        Backward\n                      </button>\n                    </div>\n\n                    <div>\n                      <button onClick={this.selectedObjectForward}>\n                        forward\n                      </button>\n                    </div>\n                  </div>\n                  <div style={{ display: 'flex' }}>\n                    <div>\n                      <button onClick={this.onGroup}>Group</button>\n                    </div>\n                    <div>\n                      <button onClick={this.onUnGroup}>UnGroup</button>\n                    </div>\n                  </div>\n                  <div style={{ display: 'flex' }}>\n                    <div>\n                      <button onClick={this.onMultipleSelection}>\n                        Multiple Selection\n                      </button>\n                    </div>\n                    <div>\n                      <button\n                        onClick={e =>\n                          this.canvas.discardActiveObject() &&\n                          this.canvas.requestRenderAll()\n                        }>\n                        Deselect\n                      </button>\n                    </div>\n                  </div>\n                  <div>\n                    <button onClick={this.onDownloadImage}>\n                      download Image\n                    </button>\n                  </div>\n\n                  <div\n                    style={{\n                      display: 'flex'\n                    }}\n                    className={\n                      !this.state.copyPasteVisibility ? 'visibility' : ''\n                    }>\n                    <div>\n                      <button onClick={this.onCopy}>Copy</button>\n                    </div>\n                    <div>\n                      <button onClick={this.onPaste}>Paste</button>\n                    </div>\n                  </div>\n                </div>\n                <div\n                  style={{\n                    display: 'flex',\n                    justifyContent: 'space-evenly',\n                    padding: '20px'\n                  }}\n                  className={!this.state.textVisibility ? 'visibility' : ''}>\n                  <FontFamily\n                    selectedFontFamily={this.state.selectedFontFamily}\n                    fonts={this.state.fontFamilys}\n                    onChangeFontFamily={this.onChangeFontFamily}\n                  />\n                  <TextAlign\n                    selectedTextAlign={this.state.selectedTextAlign}\n                    onChangeTextAlign={this.onChangeTextAlign}\n                    aligns={this.state.textAligns}\n                  />\n\n                  <Input\n                    id=\"fontColor\"\n                    type=\"color\"\n                    value={this.state.selectedColor}\n                    onChange={this.onChangeColor}\n                    displayText=\"Font Color\"\n                  />\n                  <Input\n                    id=\"fontSize\"\n                    type=\"text\"\n                    value={this.state.fontSize}\n                    onChange={this.onChangeFontSize}\n                    displayText=\"Font Size\"\n                  />\n                </div>\n              </div>\n              <canvas\n                ref={this.canvasRef}\n                height=\"500%\"\n                width=\"700%\"\n                className=\"canvas\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n//Crop images\n"]},"metadata":{},"sourceType":"module"}